<div class="radius-box configurator">
  <div class="toggle" (click)="toggleConfiguration()">
    <ng-container *ngIf="configuratorOn; else off">
      <img src="../../../../assets/icon/direction/down.png" alt="">
    </ng-container>
    <ng-template #off>
      <img src="../../../../assets/icon/direction/up.png" alt="">
    </ng-template>
  </div>
  <div [ngClass]="{'hidden': configuratorOn}">
    <div class="box">
      <div style="text-align: center">Отчетность</div>
      <label class="radio_container" *ngFor="let type of reportTypes">{{type}}
        <input name="reportType" type="radio" [(ngModel)]="currentReportType" (change)="changeReportType(type)"
               [checked]="currentReportType == type" [value]="type"/>
        <span class="checkmark"></span>
        <br>
      </label>
    </div>
    <div class="box">
      <div style="text-align: center">Валюта</div>
      <label class="radio_container" *ngFor="let currency of currencies">{{currency.name}}
        <input name="currency" type="radio" [(ngModel)]="currentCurrency.currency" (change)="recalculate()"
               [checked]="currentCurrency.currency == currency" [value]="currency"/>
        <span class="checkmark"></span>
        <br>
      </label>
    </div>
    <div class="box">
      <div style="text-align: center">Объем</div>
      <label class="radio_container" *ngFor="let abr of abbreviations">{{abr}}
        <input name="abbreviation" type="radio" [(ngModel)]="currentCurrency.abbreviation" (change)="recalculate()"
               [checked]="currentCurrency.abbreviation == abr" [value]="abr"/>
        <span class="checkmark"></span>
        <br>
      </label>
    </div>
    <div class="box">
      <div style="text-align: center">Компании</div>
      <app-search-line (selectCompany)="selectCompany($event)"></app-search-line>
    </div>
    <div class="box">
      <div style="text-align: center">
        <button type="button" class="btn btn-outline-primary" (click)="editReport = !editReport">Добавить отчет</button>
      </div>
    </div>
  </div>
</div>
<ng-container *ngIf="!editReport; else showEditReport">
  <div class="radius-box tableFixHead" *ngIf="selectedCompanies.length > 0">
    <table class="table">
      <thead>
      <tr>
        <th></th>
        <th *ngFor="let report of reportList">
          {{report.date | date:'MM.yy' }}
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let h of headerName">
        <td [ngClass]="primaryColumnStyle(h)">{{h}}</td>
        <td [ngClass]="specialStyle(h)" *ngFor="let report of reportList; let l = index">
          <span>{{reportList[l].getValueByHeaderName(h)}}</span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</ng-container>
<ng-template #showEditReport>
  <app-report-form [type]="currentReportType"></app-report-form>
</ng-template>

